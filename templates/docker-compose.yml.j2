version: "3"
services:
  flyway:
    image: ${DOCKER_IMAGE}
    container_name: flyway
    user: root
    environment:
      - TZ="Asia/Seoul"
      - FLYWAY_URL="{{ flyway_url }}"
      - FLYWAY_USER="{{ flyway_user }}"
      - FLYWAY_PASSWORD="{{ flyway_password }}"
      - FLYWAY_JAR_DIRS="{{ flyway_home }}/jars"
    command: [ "migrate" ]
    volumes:
      - {{ flyway_home }}/jars:/flyway/jars
      - {{ flyway_data }}/sql:/flyway/sql
    restart: unless-stopped
